#!/usr/bin/env python3"""Teste final para validar as correÃ§Ãµes do template dashboard.html"""import osimport sysimport django# Configurar Djangoos.environ.setdefault('DJANGO_SETTINGS_MODULE', 'sreadmin.settings')django.setup()from django.template import Template, Contextfrom django.template.loader import get_templatedef test_dashboard_template():    """Testa se o template dashboard.html carrega sem erros"""        print("="*60)    print("TESTE FINAL: VALIDAÃ‡ÃƒO DO TEMPLATE DASHBOARD.HTML")    print("="*60)        try:        # Tentar carregar o template        template = get_template('admin/painel/starlink/dashboard.html')        print("âœ… Template carregado com sucesso")                # Criar contexto de teste        context = {            'title': 'Dashboard Starlink',            'breadcrumbs': [                {'name': 'Admin', 'url': '/admin/'},                {'name': 'Starlink', 'url': '/admin/starlink/'},                {'name': 'Dashboard', 'url': None}            ],            'available_accounts': {                'ACC-2744134-64041-5': {                    'name': 'Conta Principal',                    'description': 'Conta principal consolidada'                }            },            'selected_account': 'ACC-2744134-64041-5',            'account_info': {                'name': 'Conta Principal',                'description': 'Conta principal consolidada'            },            'has_statistics': True,            'total_service_lines': 42,            'statistics': {                'active_lines': 35,                'offline_lines': 5,                'no_data_lines': 2            }        }                # Renderizar template com contexto        rendered = template.render(context)        print("âœ… Template renderizado com sucesso")                # Verificar se o conteÃºdo foi renderizado        if 'Dashboard Starlink' in rendered:            print("âœ… TÃ­tulo renderizado corretamente")        else:            print("âŒ TÃ­tulo nÃ£o encontrado no template renderizado")                    if 'Conta Principal' in rendered:            print("âœ… InformaÃ§Ãµes da conta renderizadas")        else:            print("âŒ InformaÃ§Ãµes da conta nÃ£o encontradas")                    if 'dashboard-card' in rendered:            print("âœ… Cards do dashboard renderizados")        else:            print("âŒ Cards do dashboard nÃ£o encontrados")                    # Verificar se nÃ£o hÃ¡ erros de sintaxe        if 'TemplateSyntaxError' not in rendered:            print("âœ… Nenhum erro de sintaxe de template encontrado")        else:            print("âŒ Erro de sintaxe detectado")                    print("\n" + "="*60)        print("RESULTADO: TEMPLATE DASHBOARD.HTML CORRIGIDO COM SUCESSO! ğŸ‰")        print("="*60)                # Mostrar estatÃ­sticas do template        print(f"ğŸ“Š Template renderizado com {len(rendered)} caracteres")        print(f"ğŸ“„ ContÃ©m {rendered.count('dashboard-card')} cards")        print(f"ğŸ”— ContÃ©m {rendered.count('href=')} links")        print(f"ğŸ¨ ContÃ©m {rendered.count('fas fa-')} Ã­cones")        
        return True
        
    except Exception as e:
        print(f"âŒ ERRO: {e}")
        import traceback
        traceback.print_exc()
        return False

if __name__ == "__main__":
    success = test_dashboard_template()
    sys.exit(0 if success else 1)
