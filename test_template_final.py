#!/usr/bin/env python3"""Teste final para validar as correções do template dashboard.html"""import osimport sysimport django# Configurar Djangoos.environ.setdefault('DJANGO_SETTINGS_MODULE', 'sreadmin.settings')django.setup()from django.template import Template, Contextfrom django.template.loader import get_templatedef test_dashboard_template():    """Testa se o template dashboard.html carrega sem erros"""        print("="*60)    print("TESTE FINAL: VALIDAÇÃO DO TEMPLATE DASHBOARD.HTML")    print("="*60)        try:        # Tentar carregar o template        template = get_template('admin/painel/starlink/dashboard.html')        print("✅ Template carregado com sucesso")                # Criar contexto de teste        context = {            'title': 'Dashboard Starlink',            'breadcrumbs': [                {'name': 'Admin', 'url': '/admin/'},                {'name': 'Starlink', 'url': '/admin/starlink/'},                {'name': 'Dashboard', 'url': None}            ],            'available_accounts': {                'ACC-2744134-64041-5': {                    'name': 'Conta Principal',                    'description': 'Conta principal consolidada'                }            },            'selected_account': 'ACC-2744134-64041-5',            'account_info': {                'name': 'Conta Principal',                'description': 'Conta principal consolidada'            },            'has_statistics': True,            'total_service_lines': 42,            'statistics': {                'active_lines': 35,                'offline_lines': 5,                'no_data_lines': 2            }        }                # Renderizar template com contexto        rendered = template.render(context)        print("✅ Template renderizado com sucesso")                # Verificar se o conteúdo foi renderizado        if 'Dashboard Starlink' in rendered:            print("✅ Título renderizado corretamente")        else:            print("❌ Título não encontrado no template renderizado")                    if 'Conta Principal' in rendered:            print("✅ Informações da conta renderizadas")        else:            print("❌ Informações da conta não encontradas")                    if 'dashboard-card' in rendered:            print("✅ Cards do dashboard renderizados")        else:            print("❌ Cards do dashboard não encontrados")                    # Verificar se não há erros de sintaxe        if 'TemplateSyntaxError' not in rendered:            print("✅ Nenhum erro de sintaxe de template encontrado")        else:            print("❌ Erro de sintaxe detectado")                    print("\n" + "="*60)        print("RESULTADO: TEMPLATE DASHBOARD.HTML CORRIGIDO COM SUCESSO! 🎉")        print("="*60)                # Mostrar estatísticas do template        print(f"📊 Template renderizado com {len(rendered)} caracteres")        print(f"📄 Contém {rendered.count('dashboard-card')} cards")        print(f"🔗 Contém {rendered.count('href=')} links")        print(f"🎨 Contém {rendered.count('fas fa-')} ícones")        
        return True
        
    except Exception as e:
        print(f"❌ ERRO: {e}")
        import traceback
        traceback.print_exc()
        return False

if __name__ == "__main__":
    success = test_dashboard_template()
    sys.exit(0 if success else 1)
